@import "tailwindcss";

@variant dark (.dark &);

:root {
  --background: #ffffff;
  --foreground: #171717;
}

:root.dark {
  --background: #0a0a0a;
  --foreground: #ededed;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

@media (prefers-color-scheme: dark) {
  :root:not(.light) {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
}

[contenteditable][data-placeholder]:empty:before {
  content: attr(data-placeholder);
  color: #9ca3af;
  pointer-events: none;
}

.dark [contenteditable][data-placeholder]:empty:before {
  color: #6b7280;
}

/* Paragraph indicators - show ¶ symbol at end of each paragraph */
[contenteditable] div:not(:empty):after {
  content: '¶';
  color: #cbd5e1;
  margin-left: 4px;
  font-size: 0.9em;
  opacity: 0.3;
  pointer-events: none;
  user-select: none;
}

.dark [contenteditable] div:not(:empty):after {
  color: #64748b;
  opacity: 0.4;
}

/* Hide paragraph indicator when typing at end of line */
[contenteditable] div:focus:after {
  opacity: 0.2;
}

/* 
  Fix for Monaco Editor's hidden input area.
  1. Hide the resize handle and outline (Visuals).
  2. Collapse dimensions to 1px to prevent "Gap"/"Layout Shift" (Visuals).
  3. Do NOT set position/top/left! Let Monaco handle that for cursor tracking.
*/
/* 
  CRITICAL MONACO FIX
  1. Target the Wrapper (.native-edit-context): Force 'absolute' to remove from flow (Fixes Gap).
  2. Target the Input (textarea): 1px dimensions + resize:none (Fixes Visuals).
  3. Do NOT touch top/left coordinates. Monaco specifically manages these for cursor tracking.
*/

.monaco-editor .native-edit-context {
  position: absolute !important;
  /* Ensure it doesn't take up visual space or flow space */
  width: 1px !important;
  height: 1px !important;
  overflow: hidden !important;
  opacity: 0 !important;
  padding: 0 !important;
  margin: 0 !important;
  border: none !important;
}

.monaco-editor textarea {
  position: absolute !important;
  /* Ensure absolute within the absolute wrapper */
  resize: none !important;
  outline: none !important;
  border: none !important;
  background-color: transparent !important;
  color: transparent !important;

  /* Collapse dimensions */
  width: 1px !important;
  height: 1px !important;
  min-width: 0 !important;
  min-height: 0 !important;
  padding: 0 !important;
  margin: 0 !important;
}